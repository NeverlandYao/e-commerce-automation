# 电商AI自动化平台 - 整体规划文档

## 📋 项目概述

**项目名称**: E-Commerce AI Automation Platform  
**项目类型**: Docker容器化Web应用  
**核心流程**: 数据采集 → AI分析爆品 → 1688比价 → 自动上品  
**技术栈**: TypeScript + Next.js + Hono + Crawlee + Playwright + FastGPT API + 模块化架构  
**目标**: 实现电商商品从发现到上架的全自动化流程的容器化Web应用

## 🏗️ 容器化Web应用系统架构设计

### 技术架构选型

**前端技术栈**:
- **Next.js 14**: 现代化全栈React框架，支持SSR/SSG，内置优化
- **React 18**: 现代化UI框架，组件化开发
- **shadcn/ui**: 现代化UI组件库，基于Radix UI和Tailwind CSS构建
- **TypeScript**: 类型安全，提升开发效率和代码质量
- **Tailwind CSS**: 原子化CSS框架，快速样式开发

**前端功能模块**:
- **App Router**: Next.js 13+ 应用路由，支持嵌套路由和布局
- **shadcn/ui**: 现代化UI组件库，提供可复用的组件系统
- **Zustand**: 轻量级状态管理，管理全局应用状态
- **React Query**: 数据获取和缓存，与后端API通信
- **Recharts**: 数据可视化，展示分析结果和统计图表

**后端技术栈**:
- **Hono**: 轻量级高性能Web框架，支持多运行时
- **TypeScript**: 类型安全的后端开发
- **Crawlee**: 专业爬虫框架，支持大规模数据采集
- **Playwright**: 现代化浏览器自动化，支持有头浏览器
- **PostgreSQL**: 企业级关系数据库，存储业务数据
- **Redis**: 内存数据库，用于缓存和任务队列

**架构特点**:
- **容器化部署**: Docker容器化，支持一键部署和扩展
- **前后端分离**: 清晰的架构边界，独立开发和部署
- **服务分离**: 爬虫服务、上品服务、AI服务模块化设计
- **统一UI**: 集成式Web界面，支持所有功能模块
- **有头浏览器**: 使用有头浏览器，提高成功率和稳定性
- **高可用**: 支持负载均衡和故障恢复
- **可扩展**: 微服务架构，易于水平扩展

### Docker容器化架构设计

**前端服务 (Next.js)**:
- Next.js + TypeScript构建的现代化Web应用
- App Router提供文件系统路由和嵌套布局
- shadcn/ui组件库，提供现代化的UI组件系统
- 状态管理使用Zustand，轻量级且类型安全
- 通过HTTP API与后端服务通信

**前端功能模块**:
- Next.js + TypeScript构建的现代化Web界面
- 服务端渲染(SSR)和静态生成(SSG)支持
- shadcn/ui组件库，提供现代化的UI组件
- 状态管理使用Zustand，管理全局应用状态
- **任务管理界面**: 创建、配置和监控爬虫任务
- **数据展示界面**: 展示爬虫结果、分析报告和统计图表
- **脚本管理界面**: 管理爬虫脚本和上品脚本配置
- **系统监控界面**: 实时显示服务状态和资源使用情况
- 通过RESTful API与后端服务通信

**后端服务 (Hono)**:
- Hono编写的高性能Web API服务
- TypeScript类型安全的后端开发
- 支持多种运行时环境(Node.js, Bun, Deno等)
- 数据库操作和业务逻辑处理
- **脚本加载器**: 动态加载和执行爬虫脚本、上品脚本
- **任务队列管理**: 管理爬虫任务的分发和执行状态
- **资源监控**: 监控服务的CPU、内存和网络使用情况
- **故障恢复**: 检测服务异常并自动重启
- **负载均衡**: 在多个服务实例间分配任务

**API接口系统 (RESTful API)**:
- 类型安全的前后端通信接口
- 异步API处理，支持长时间运行的任务
- WebSocket用于实时状态更新
- 统一错误处理和响应格式
- JWT认证和权限控制

### 数据存储架构

**主数据库 (PostgreSQL)**:
- 商品数据存储和管理
- 任务执行记录和历史
- 用户配置和权限信息
- 分析结果和报告数据
- 脚本配置和版本管理

**缓存数据库 (Redis)**:
- 任务队列和消息队列
- 会话缓存和临时数据
- 实时状态和监控数据
- 分布式锁和计数器
- 热点数据缓存

**文件存储系统**:
- 商品图片和媒体文件
- 爬虫脚本和上品脚本
- 日志文件和审计记录
- 数据导出和备份文件
- 浏览器会话和Cookie存储

**数据持久化机制**:
- 数据库自动备份和恢复
- 配置文件版本控制
- 数据迁移和升级工具
- 容器数据卷持久化

### Docker容器化整体架构图 (微服务架构)
```
┌─────────────────────────────────────────────────────────────┐
│                   Docker容器化微服务架构                      │
├─────────────────────────────────────────────────────────────┤
│                   前端服务层 (Frontend Service)              │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │         Next.js + TypeScript + shadcn/ui             │  │
│  │    ┌─────────┬─────────┬─────────┬─────────┐        │  │
│  │    │ 任务管理 │ 数据展示 │ 脚本管理 │ 系统监控 │        │  │
│  │    │   UI    │   UI    │   UI    │   UI    │        │  │
│  │    └─────────┴─────────┴─────────┴─────────┘        │  │
│  │      App Router + SSR/SSG + Zustand + React Query    │  │
│  └─────────────────────────────────────────────────────────┘  │
├─────────────────────────────────────────────────────────────┤
│                    RESTful API + WebSocket                 │
│                  (前端 ↔ 后端服务通信)                       │
├─────────────────────────────────────────────────────────────┤
│                  后端服务层 (Backend Services)               │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │              Hono API服务 + TypeScript                │  │
│  │    ┌─────────┬─────────┬─────────┬─────────┐        │  │
│  │    │脚本加载 │任务队列 │资源监控 │故障恢复  │        │  │
│  │    │ Loader │ Queue  │Monitor │Recovery │        │  │
│  │    └─────────┴─────────┴─────────┴─────────┘        │  │
│  │         动态脚本执行 + 任务调度 + 负载均衡            │  │
│  └─────────────────────────────────────────────────────────┘  │
├─────────────────────────────────────────────────────────────┤
│                业务逻辑层 (Business Logic Layer)             │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │              爬虫服务 + 上品服务集群                    │  │
│  │    ┌─────────┬─────────┬─────────┬─────────┐        │  │
│  │    │ Crawlee │Playwright│ AI集成  │ 脚本引擎 │        │  │
│  │    │ 爬虫框架 │有头浏览器 │FastGPT │ Scripts │        │  │
│  │    └─────────┴─────────┴─────────┴─────────┘        │  │
│  │      会话管理 + 代理轮换 + 反反爬 + 模块化脚本         │  │
│  └─────────────────────────────────────────────────────────┘  │
├─────────────────────────────────────────────────────────────┤
│            数据存储层 (PostgreSQL + Redis + FileSystem)       │
└─────────────────────────────────────────────────────────────┘
```

### 项目目录结构

```
e-commerce-ai-platform/
├── frontend/                    # Next.js前端服务
│   ├── src/                     # 前端源码
│   │   ├── app/                 # App Router页面
│   │   │   ├── dashboard/       # 仪表板页面
│   │   │   ├── tasks/           # 任务管理页面
│   │   │   ├── products/        # 商品管理页面
│   │   │   ├── scripts/         # 脚本管理页面
│   │   │   ├── analytics/       # 数据分析页面
│   │   │   ├── settings/        # 设置页面
│   │   │   ├── layout.tsx       # 根布局
│   │   │   ├── page.tsx         # 首页
│   │   │   └── globals.css      # 全局样式
│   │   ├── components/          # UI组件
│   │   │   ├── ui/              # shadcn/ui组件
│   │   │   ├── layout/          # 布局组件
│   │   │   ├── forms/           # 表单组件
│   │   │   ├── charts/          # 图表组件
│   │   │   └── common/          # 通用组件
│   │   ├── hooks/               # React Hooks
│   │   ├── store/               # 状态管理(Zustand)
│   │   ├── lib/                 # 工具库
│   │   │   ├── api.ts           # API客户端
│   │   │   ├── utils.ts         # 工具函数
│   │   │   └── validations.ts   # 表单验证
│   │   └── types/               # TypeScript类型定义
│   ├── public/                  # 静态资源
│   ├── next.config.js           # Next.js配置
│   ├── tailwind.config.js       # Tailwind CSS配置
│   ├── tsconfig.json            # TypeScript配置
│   ├── package.json             # 前端依赖
│   └── Dockerfile               # 前端Docker配置
├── backend/                     # Hono后端服务
│   ├── src/                     # 后端源码
│   │   ├── index.ts             # 主入口文件
│   │   ├── app.ts               # Hono应用配置
│   │   ├── routes/              # API路由
│   │   │   ├── index.ts         # 路由入口
│   │   │   ├── tasks.ts         # 任务管理API
│   │   │   ├── products.ts      # 商品管理API
│   │   │   ├── scripts.ts       # 脚本管理API
│   │   │   ├── analytics.ts     # 数据分析API
│   │   │   └── system.ts        # 系统监控API
│   │   ├── services/            # 业务服务
│   │   │   ├── crawler.ts       # 爬虫服务
│   │   │   ├── publisher.ts     # 上品服务
│   │   │   ├── ai.ts            # AI分析服务
│   │   │   ├── script-loader.ts # 脚本加载器
│   │   │   └── task-queue.ts    # 任务队列服务
│   │   ├── models/              # 数据模型
│   │   │   ├── index.ts         # 模型入口
│   │   │   ├── product.ts       # 商品模型
│   │   │   ├── task.ts          # 任务模型
│   │   │   ├── script.ts        # 脚本模型
│   │   │   └── user.ts          # 用户模型
│   │   ├── database/            # 数据库操作
│   │   │   ├── index.ts         # 数据库入口
│   │   │   ├── connection.ts    # 数据库连接
│   │   │   ├── migrations/      # 数据库迁移
│   │   │   └── seeds/           # 数据种子
│   │   ├── middleware/          # 中间件
│   │   │   ├── auth.ts          # 认证中间件
│   │   │   ├── cors.ts          # CORS中间件
│   │   │   ├── logger.ts        # 日志中间件
│   │   │   └── error.ts         # 错误处理中间件
│   │   ├── utils/               # 工具函数
│   │   │   ├── logger.ts        # 日志工具
│   │   │   ├── config.ts        # 配置管理
│   │   │   ├── validation.ts    # 数据验证
│   │   │   └── helpers.ts       # 辅助函数
│   │   └── types/               # 类型定义
│   ├── package.json             # 后端依赖配置
│   ├── tsconfig.json            # TypeScript配置
│   ├── .env.example             # 环境变量示例
│   └── Dockerfile               # 后端Docker配置
├── scripts-service/             # 独立脚本服务 (基于Hono框架)
│   ├── src/                     # 脚本服务源码
│   │   ├── app.ts               # Hono应用入口
│   │   ├── routes/              # API路由
│   │   │   ├── index.ts         # 路由入口
│   │   │   ├── crawler.ts       # 爬虫任务API
│   │   │   ├── publisher.ts     # 上品任务API
│   │   │   ├── health.ts        # 健康检查API
│   │   │   └── status.ts        # 状态监控API
│   │   ├── services/            # 业务服务层
│   │   │   ├── crawler-service.ts    # 爬虫服务管理
│   │   │   ├── publisher-service.ts  # 上品服务管理
│   │   │   ├── task-queue.ts         # 任务队列服务
│   │   │   ├── browser-pool.ts       # 浏览器池管理
│   │   │   └── script-loader.ts      # 脚本动态加载器
│   │   ├── crawlers/            # 爬虫脚本模块
│   │   │   ├── base/            # 基础爬虫类
│   │   │   │   ├── BaseCrawler.ts   # 基础爬虫类
│   │   │   │   ├── BrowserManager.ts # 浏览器管理
│   │   │   │   └── SessionManager.ts # 会话管理
│   │   │   ├── platforms/       # 平台爬虫脚本
│   │   │   │   ├── taobao/      # 淘宝爬虫
│   │   │   │   │   ├── TaobaoCrawler.ts # 淘宝爬虫主类
│   │   │   │   │   ├── product.ts   # 商品爬取
│   │   │   │   │   └── search.ts    # 搜索爬取
│   │   │   │   ├── jd/          # 京东爬虫
│   │   │   │   │   ├── JDCrawler.ts # 京东爬虫主类
│   │   │   │   │   ├── product.ts   # 商品爬取
│   │   │   │   │   └── search.ts    # 搜索爬取
│   │   │   │   └── amazon/      # 亚马逊爬虫
│   │   │   │       ├── AmazonCrawler.ts # 亚马逊爬虫主类
│   │   │   │       ├── product.ts   # 商品爬取
│   │   │   │       └── search.ts    # 搜索爬取
│   │   │   └── utils/           # 爬虫工具
│   │   │       ├── ProxyManager.ts  # 代理管理
│   │   │       ├── AntiDetection.ts # 反检测工具
│   │   │       └── DataExtractor.ts # 数据提取工具
│   │   ├── publishers/          # 上品脚本模块
│   │   │   ├── base/            # 基础上品类
│   │   │   │   └── BasePublisher.ts # 基础上品类
│   │   │   ├── platforms/       # 平台上品脚本
│   │   │   │   ├── shopify/     # Shopify上品
│   │   │   │   │   ├── ShopifyPublisher.ts # Shopify上品主类
│   │   │   │   │   ├── product.ts      # 商品上传
│   │   │   │   │   └── inventory.ts    # 库存管理
│   │   │   │   ├── woocommerce/ # WooCommerce上品
│   │   │   │   │   ├── WooCommercePublisher.ts # WooCommerce上品主类
│   │   │   │   │   ├── product.ts      # 商品上传
│   │   │   │   │   └── inventory.ts    # 库存管理
│   │   │   │   └── magento/     # Magento上品
│   │   │   │       ├── MagentoPublisher.ts # Magento上品主类
│   │   │   │       ├── product.ts      # 商品上传
│   │   │   │       └── inventory.ts    # 库存管理
│   │   │   └── utils/           # 上品工具
│   │   │       ├── ImageProcessor.ts   # 图片处理
│   │   │       ├── PriceCalculator.ts  # 价格计算
│   │   │       └── ProductMapper.ts    # 商品映射
│   │   ├── middleware/          # 中间件
│   │   │   ├── auth.ts          # 认证中间件
│   │   │   ├── cors.ts          # CORS中间件
│   │   │   ├── logger.ts        # 日志中间件
│   │   │   ├── rate-limit.ts    # 限流中间件
│   │   │   └── error-handler.ts # 错误处理中间件
│   │   ├── utils/               # 工具函数
│   │   │   ├── config.ts        # 配置管理
│   │   │   ├── logger.ts        # 日志工具
│   │   │   ├── validation.ts    # 数据验证
│   │   │   ├── queue.ts         # 队列工具
│   │   │   └── helpers.ts       # 辅助函数
│   │   └── types/               # 类型定义
│   │       ├── crawler.ts       # 爬虫类型
│   │       ├── publisher.ts     # 上品类型
│   │       ├── task.ts          # 任务类型
│   │       └── api.ts           # API类型
│   ├── package.json             # 脚本服务依赖
│   ├── tsconfig.json            # TypeScript配置
│   ├── .env.example             # 环境变量示例
│   ├── Dockerfile               # 脚本服务Docker配置
│   └── README.md                # 脚本服务文档
├── shared/                      # 前后端共享代码
│   ├── types/                   # 共享类型定义
│   ├── constants/               # 常量定义
│   └── utils/                   # 通用工具
├── public/                      # 静态资源
│   ├── icons/                   # 应用图标
│   └── assets/                  # 静态资源文件
├── plugins-config/              # 插件配置
│   ├── crawlee-scrapers.json   # Crawlee爬虫配置
│   ├── publishers.json         # 上品配置
│   ├── analyzers.json          # 分析器配置
│   ├── accounts.json           # 账号池配置
│   ├── proxies.json            # 代理池配置
│   ├── fingerprints.json       # 指纹模板配置
│   └── anti-detection.json     # 反检测策略配置
├── workflows/                   # 工作流定义
│   ├── default-workflow.json   # 默认工作流
│   └── custom-workflows/       # 自定义工作流
├── data/                        # 数据目录
│   ├── products/               # 商品数据
│   ├── analysis/               # 分析结果
│   ├── cookies/                # Cookie存储
│   │   ├── taobao/             # 淘宝Cookie
│   │   ├── jd/                 # 京东Cookie
│   │   └── amazon/             # 亚马逊Cookie
│   ├── sessions/               # 浏览器会话
│   ├── fingerprints/           # 浏览器指纹
│   ├── proxies/                # 代理配置
│   └── logs/                   # 日志文件
├── tests/                       # 测试文件
│   ├── unit/                   # 单元测试
│   ├── integration/            # 集成测试
│   └── e2e/                    # 端到端测试
├── docs/                        # 项目文档
│   ├── api/                     # API文档
│   ├── deployment/              # 部署文档
│   ├── development/             # 开发文档
│   └── architecture/            # 架构文档
├── docker/                      # Docker配置
│   ├── frontend/                # 前端Docker配置
│   │   ├── Dockerfile          # 前端Dockerfile
│   │   └── nginx.conf          # Nginx配置
│   ├── backend/                 # 后端Docker配置
│   │   └── Dockerfile          # 后端Dockerfile
│   ├── scripts/                 # 脚本Docker配置
│   │   └── Dockerfile          # 脚本Dockerfile
│   └── database/                # 数据库Docker配置
│       ├── postgres/           # PostgreSQL配置
│       └── redis/              # Redis配置
├── deployment/                  # 部署配置
│   ├── docker-compose.yml      # Docker Compose配置
│   ├── docker-compose.dev.yml  # 开发环境配置
│   ├── docker-compose.prod.yml # 生产环境配置
│   ├── kubernetes/              # Kubernetes配置
│   │   ├── namespace.yaml      # 命名空间
│   │   ├── frontend.yaml       # 前端部署
│   │   ├── backend.yaml        # 后端部署
│   │   └── database.yaml       # 数据库部署
│   └── scripts/                 # 部署脚本
│       ├── deploy.sh           # 部署脚本
│       └── backup.sh           # 备份脚本
├── .gitignore                  # Git忽略文件
├── .dockerignore                # Docker忽略文件
├── .env                        # 环境变量
├── .env.example                # 环境变量示例
├── package.json                # 根目录依赖管理
├── tsconfig.json               # 根目录TypeScript配置
└── README.md                   # 项目说明
```

### Web应用特有功能

**容器化部署功能**:
- **Docker容器**: 基于Docker的容器化部署，支持快速部署和扩展
- **服务编排**: 使用Docker Compose进行多服务编排和管理
- **负载均衡**: 支持Nginx负载均衡和反向代理配置
- **自动扩缩容**: 支持Kubernetes自动扩缩容和服务发现
- **浏览器通知**: Web Notification API，支持浏览器原生通知
- **文件上传**: 支持拖拽上传和批量文件处理
- **剪贴板集成**: Clipboard API，支持复制粘贴商品链接
- **PWA支持**: 渐进式Web应用，支持离线使用和桌面安装

**界面管理**:
- **响应式设计**: 支持桌面、平板、手机多端适配
- **主题切换**: 支持明暗主题和自定义主题
- **多标签页**: 支持多标签页管理和状态保持
- **全屏模式**: 支持全屏工作模式
- **快捷键**: 支持键盘快捷键操作

**性能优化**:
- **Node.js后端**: 高性能的Node.js + Hono后端处理
- **异步处理**: 基于事件循环的高效异步处理
- **内存管理**: TypeScript类型安全和垃圾回收机制
- **轻量级**: 容器化部署，资源占用可控
- **缓存优化**: Redis缓存和CDN加速

**安全特性**:
- **容器隔离**: Docker容器安全隔离机制
- **HTTPS加密**: 全站HTTPS加密传输
- **权限控制**: 基于角色的访问控制(RBAC)
- **数据加密**: 敏感数据加密存储
- **安全审计**: 操作日志和安全审计

### 开发和部署架构

**开发环境**:
- **热重载**: Next.js前端热重载 + Hono后端热重载，极速开发体验
- **调试工具**: 前端Chrome DevTools + Node.js调试工具集成
- **类型检查**: 前后端统一TypeScript类型安全
- **代码规范**: ESLint/Prettier统一代码规范
- **API类型共享**: 前后端共享API类型定义

**构建打包**:
- **前端构建**: Next.js构建优化的Web应用
- **后端构建**: Hono后端应用构建和优化
- **脚本模块构建**: Crawlee爬虫脚本和上品脚本模块构建
- **Docker镜像构建**: 多阶段构建优化镜像大小
  - 前端镜像: Next.js + Nginx静态资源服务
  - 后端镜像: Node.js + Hono API服务
  - 脚本镜像: Node.js + Crawlee + 有头浏览器
  - 数据库镜像: PostgreSQL + Redis配置
- **镜像优化**: 使用Alpine Linux减少镜像体积
- **多架构支持**: 支持AMD64和ARM64架构
- **CI/CD集成**: GitHub Actions自动化构建和推送镜像

**容器化部署**:
- **Docker Compose**: 本地开发和测试环境一键部署
- **Kubernetes**: 生产环境容器编排和管理
- **云平台部署**: 支持AWS、Azure、GCP等云平台
- **私有化部署**: 支持企业内部私有云部署
- **版本管理**: 镜像版本管理和回滚机制
- **监控告警**: 集成Prometheus + Grafana监控体系

## 🔌 微服务架构设计 (前后端分离 + 服务分离)

### 架构演进说明

**微服务分离架构优势**:
- **前端专注渲染**: Next.js + TypeScript提供现代化UI和数据展示
- **后端API服务**: Hono后端集中处理API请求和业务逻辑
- **脚本服务集群**: 基于Hono框架的独立脚本服务，提供RESTful API接口，支持水平扩展和负载均衡
- **服务完全分离**: 实现UI渲染、API服务、业务脚本的完全解耦

### 🚀 Docker容器化微服务架构 (核心业务层)

**微服务设计理念**:
- **服务分离**: 前端、后端、脚本服务独立部署和扩展
- **容器隔离**: 每个服务运行在独立的Docker容器中，确保资源隔离
- **动态扩展**: 支持服务的动态扩缩容和负载均衡
- **资源管理**: 可以独立控制每个服务的资源使用
- **故障隔离**: 单个服务故障不会影响其他服务
- **跨平台部署**: Docker容器支持在任何支持Docker的平台部署

### 🔧 基于Hono的脚本服务架构

**脚本服务特性**:
- **Hono框架**: 轻量级、高性能的Web框架，专为边缘计算优化
- **RESTful API**: 提供标准化的HTTP API接口，便于前后端调用
- **任务队列**: 内置任务队列系统，支持异步任务处理
- **浏览器池**: 统一管理Playwright浏览器实例，提高资源利用率
- **插件系统**: 支持动态加载爬虫和上品插件
- **监控指标**: 内置健康检查和性能监控接口
- **水平扩展**: 支持多实例部署，通过负载均衡分发任务

**脚本服务API设计**:
```typescript
// 爬虫任务API
POST /api/crawler/tasks          # 创建爬虫任务
GET  /api/crawler/tasks          # 获取任务列表
GET  /api/crawler/tasks/:id      # 获取任务详情
DELETE /api/crawler/tasks/:id    # 取消任务

// 上品任务API
POST /api/publisher/tasks        # 创建上品任务
GET  /api/publisher/tasks        # 获取任务列表
GET  /api/publisher/tasks/:id    # 获取任务详情
DELETE /api/publisher/tasks/:id  # 取消任务

// 系统监控API
GET  /api/health                 # 健康检查
GET  /api/status                 # 服务状态
GET  /api/metrics                # 性能指标
```

**服务间通信**:
- **后端 → 脚本服务**: 通过HTTP API调用脚本服务执行任务
- **脚本服务 → 后端**: 通过Webhook或轮询方式报告任务状态
- **前端 → 后端**: 前端通过后端API间接调用脚本服务
- **负载均衡**: 使用Nginx或云负载均衡器分发请求到多个脚本服务实例


**最佳实践和注意事项**:

1. **性能优化**:
   - 使用浏览器池管理，避免频繁创建销毁浏览器实例
   - 实现任务队列，控制并发数量
   - 使用Redis缓存频繁访问的数据
   - 定期清理过期任务和日志

2. **错误处理**:
   - 实现全局错误处理中间件
   - 对爬虫任务实现重试机制
   - 记录详细的错误日志便于调试
   - 实现熔断器模式防止级联失败

3. **安全考虑**:
   - 使用JWT或API Key进行身份验证
   - 实现请求频率限制
   - 验证和清理用户输入
   - 使用HTTPS进行数据传输

4. **扩展性设计**:
   - 支持水平扩展，多实例部署
   - 使用消息队列处理异步任务
   - 实现服务发现和负载均衡
   - 支持插件化架构，便于添加新平台

**微服务架构图**:
```
┌─────────────────────────────────────────────────────────────┐
│                Docker 容器化微服务架构                        │
├─────────────────────────────────────────────────────────────┤
│                   前端服务 (Frontend Service)                │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │         Next.js + TypeScript + shadcn/ui             │  │
│  │    ┌─────────┬─────────┬─────────┬─────────┐        │  │
│  │    │ 任务管理 │ 数据展示 │ 脚本管理 │ 系统监控 │        │  │
│  │    │   UI    │   UI    │   UI    │   UI    │        │  │
│  │    └─────────┴─────────┴─────────┴─────────┘        │  │
│  │       App Router + 热重载 + Zustand + TanStack Query │  │
│  └─────────────────────────────────────────────────────────┘  │
├─────────────────────────────────────────────────────────────┤
│                    RESTful API & WebSocket                 │
│                (前端 ↔ 后端 ↔ 脚本服务通信)                   │
├─────────────────────────────────────────────────────────────┤
│                  后端服务 (Backend Service)                 │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │               Hono + Node.js + TypeScript              │  │
│  │    ┌─────────┬─────────┬─────────┬─────────┐        │  │
│  │    │API路由 │任务管理 │用户认证 │数据处理  │        │  │
│  │    │Router │TaskMgr │ Auth   │DataProc │        │  │
│  │    └─────────┴─────────┴─────────┴─────────┘        │  │
│  │           中间件 + 验证 + 日志 + 错误处理             │  │
│  └─────────────────────────────────────────────────────────┘  │
├─────────────────────────────────────────────────────────────┤
│                脚本服务集群 (Script Services)                │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │            Node.js + Crawlee + 有头浏览器              │  │
│  │    ┌─────────┬─────────┬─────────┬─────────┐        │  │
│  │    │ 爬虫服务 │ 上品服务 │ AI集成  │ 代理管理 │        │  │
│  │    │Crawlers │Publishers│AI Integ │ProxyMgr │        │  │
│  │    └─────────┴─────────┴─────────┴─────────┘        │  │
│  │      会话管理 + 反检测 + 任务队列 + 负载均衡          │  │
│  └─────────────────────────────────────────────────────────┘  │
├─────────────────────────────────────────────────────────────┤
│                数据存储层 (Data Storage Layer)               │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │            PostgreSQL + Redis + File System          │  │
│  │    ┌─────────┬─────────┬─────────┬─────────┐        │  │
│  │    │ 业务数据 │ 缓存数据 │ 文件存储 │ 日志数据 │        │  │
│  │    │PostgreSQL│ Redis  │FileSystem│ Logs   │        │  │
│  │    └─────────┴─────────┴─────────┴─────────┘        │  │
│  │              数据持久化 + 备份恢复 + 集群             │  │
│  └─────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────┘
```